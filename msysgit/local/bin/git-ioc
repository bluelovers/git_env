#!/bin/perl

use File::Basename qw(dirname);

{
	local $file = __FILE__;
	$file =~ s/\\/\//g;
	unshift @INC, dirname($file);
};

use Switch;

require 'lib/common.pl';
require 'lib/input.pm';
require 'lib/git.pm';

my $ignorefile = ".gitignore-oncommit";

my $input = CmdLineTool::newInstance();

my %params = $input->parseCmdLine(@ARGV);

my $file = $input->getParam($params{first});

if (!$file || $file eq '')
{
	exit;
}

switch ($params{first})
{
	case ('--add')
	{
		GitTool::git_exec('git update-index --assume-unchanged \"${file}\"');
	}
	case ('--rm')
	{
		GitTool::git_exec('git update-index --no-assume-unchanged \"${file}\"');
	}
}

1;
